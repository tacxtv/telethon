{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,wBAOAC,OAAOC,OAASH,EAAAI,QAChBC,EAAMC,OAAO,MAGbN,EAAAI,QAAOG,MAAM,MAAO,CAChBC,MAAO,KACPC,SAAU,IACVC,SAAU,IACVC,MAAO,GACPC,KAAM,UACNC,MAAM,EACNC,SAAU,KACVC,MAAO,KACPC,OACI,MAAMC,EAAS,IAAIC,gBAAgBC,SAASC,SAASC,QAC/CZ,EAAWa,SAASL,EAAOM,IAAI,aACjCd,GAAY,IAAGe,KAAKf,SAAsB,IAAXA,GACnC,MAAMC,EAAWY,SAASL,EAAOM,IAAI,aACjCb,GAAY,IAAGc,KAAKd,SAAsB,IAAXA,GACnC,MAAMC,EAAQW,SAASL,EAAOM,IAAI,UAC9BZ,GAAS,IAAGa,KAAKb,MAAQA,GAC7B,MAAMC,EAAOK,EAAOM,IAAI,QACX,YAATX,GAA+B,UAATA,IAAkBY,KAAKZ,KAAOA,GACR,IAAlCU,SAASL,EAAOM,IAAI,WACvBC,KAAKC,QAEhBD,KAAKV,SAAWZ,OAAOwB,aAAaC,QAAQ,YAE5CR,SAASS,iBAAiB,oBAAoB,KACtCX,EAAOY,IAAI,WAAUV,SAASW,eAAe,qBAAqBC,MAAM,oBAAsB,OAAOd,EAAOM,IAAI,aAEpHC,KAAKQ,mBACLC,aAAY,IAAMT,KAAKQ,oBAAoBR,KAAKf,SAAS,G,EAGjEuB,mBACI,MAAME,EAAM7B,IAEZ,GAAI6B,EAAIC,KAAKX,KAAKb,MAAOa,KAAKZ,MAAMwB,WAAaZ,KAAKV,SAAU,CAC5DU,KAAKX,MAAO,EACZ,MAAMwB,EAAUC,YAAW,KACvBd,KAAKX,MAAO,EACZ0B,aAAaF,EAAQ,GACtBb,KAAKd,UACRc,KAAKV,SAAWoB,EAAIE,UACpBlC,OAAOwB,aAAac,QAAQ,WAAYhB,KAAKV,S,GAGrDW,QACID,KAAKb,MAAQ,GACba,KAAKf,SAAW,IAChBe,KAAKd,SAAW,G,IAIxBV,EAAAI,QAAOqC","sources":["src/advertising/script.ts"],"sourcesContent":["'use strict'\n\nimport Alpine from 'alpinejs'\nimport * as dayjs from 'dayjs'\nimport 'dayjs/locale/fr'\n\n// @ts-ignore\nwindow.Alpine = Alpine\ndayjs.locale('fr')\n\n// noinspection JSUnusedGlobalSymbols\nAlpine.store('app', {\n    title: null,\n    interval: 60 * 1_000,\n    duration: 8 * 1_000,\n    spawn: 60,\n    unit: 'minutes',\n    open: false,\n    lastUsed: null,\n    image: null,\n    init(): void {\n        const params = new URLSearchParams(document.location.search)\n        const interval = parseInt(params.get('interval'))\n        if (interval >= 1) this.interval = interval * 1_000\n        const duration = parseInt(params.get('duration'))\n        if (duration >= 1) this.duration = duration * 1_000\n        const spawn = parseInt(params.get('spawn'))\n        if (spawn >= 1) this.spawn = spawn\n        const unit = params.get('unit')\n        if (unit === 'minutes' || unit === 'hours') this.unit = unit\n        const debug = parseInt(params.get('debug')) === 1\n        if (debug) this.debug()\n\n        this.lastUsed = window.localStorage.getItem('lastUsed')\n\n        document.addEventListener('DOMContentLoaded', () => {\n            if (params.has('image')) document.getElementById('advertising-image').style['background-image'] = `url(${params.get('image')})`\n\n            this.intervalFunction()\n            setInterval(() => this.intervalFunction(), this.interval)\n        })\n    },\n    intervalFunction(): void {\n        const now = dayjs()\n\n        if (now.add(-this.spawn, this.unit).valueOf() >= this.lastUsed) {\n            this.open = true\n            const handler = setTimeout(() => {\n                this.open = false\n                clearTimeout(handler)\n            }, this.duration)\n            this.lastUsed = now.valueOf()\n            window.localStorage.setItem('lastUsed', this.lastUsed)\n        }\n    },\n    debug(): void {\n        this.spawn = 0.2\n        this.interval = 1_000\n        this.duration = 4_000\n    },\n})\n\nAlpine.start()\n"],"names":["$hKdZU","parcelRequire","window","Alpine","default","$gngdn","locale","store","title","interval","duration","spawn","unit","open","lastUsed","image","init","params","URLSearchParams","document","location","search","parseInt","get","this","debug","localStorage","getItem","addEventListener","has","getElementById","style","intervalFunction","setInterval","now","add","valueOf","handler","setTimeout","clearTimeout","setItem","start"],"version":3,"file":"advertising.5db117a4.js.map"}